<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <title>Xen Tool</title>
    <meta name="description" content="Xen Edo Scala Tool">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Jquery-->
<!--     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script> -->

    <!--Twitter card-->
<!--     <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="devinsmith.work/">
    <meta name="twitter:creator" content="@devinsmithwork">
    <meta name="twitter:title" content="Devin Smith">
    <meta name="twitter:description" content="SF-based musician, writer, etc.">
    <meta name="twitter:image" content="http://www.devinsmith.work/slowyear.jpg"> -->

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="style.css">

    <!--js-->
    <script src="script.js"></script> 

    <style>
        body {
            font-family: robotto mono, andale mono, monospace;
            background:lightblue;
            color:deeppink;
            text-shadow: 1px 1px 1px aqua, -1px -1px 1px yellow;

            text-transform: uppercase;
            text-align: center;

/*            max-width: 800px;
            margin:0px auto;*/

            padding-bottom:3em;
        }
    </style>

</head>



<body onload="refreshPage();audioSetup();">

    <!--
        RESOURCES:

        Scala format:
        http://www.huygens-fokker.org/scala/scl_format.html

        Scala key mappings:
        http://www.huygens-fokker.org/scala/help.htm#mappings

        Eq. Temperment freqs:
        https://pages.mtu.edu/~suits/notefreqs.html
    -->

    <h1>XENNY FROM THE BLOCK</h1>
    <!-- <p class="">Don't be fooled by the rocks that I got / I'm just a tool for building &amp; demoing xenharmonic scales</p> -->
    <p class="tbd large">Don't be fooled by the rocks that I got<br>I'm just a tool for building &amp; demoing xenharmonic scales.</p>
    <br>
    <p class="tbd large">This is a work in progress &amp; there's still a lot of kinks to work out.<br><a href="mailto:devin.smith.work@gmail.com">Email me</a> if you have feedback.</p>
    <!-- 
    <p>
        <b>ABOUT:</b> This is a tool for creating Scala .SCA and .KYB files for xenharmonic scales in equal divisions of "variable octaves."
    </p>
    <p>
        What I mean by "variable octaves" is this: in standard tunings, octaves are in ratios of 2 (the A above A440 is 880hz, the A below is 220hz). However, this tool allows you to set the ratio between octave frequencies. First, the octave frequencies are calculated from the root frequency, then the scale divisions are calculated between these octaves in equal steps.
    </p>
    <p>
        The output in the two fields below, "Scala" and "Key Map" can be saved and imported into virtual instruments which support the Scala format.
    </p> -->

<!--     <div class="input-div">
        <label for="volume">Root Freq.</label>
        <input id="rootFreq" type="number"  min="1" max="20000" value="20"></input>
    </div> -->


<!--------------------------->
<h2>SCALE SETUP</h2>
    <p class="tbd">
        Right now this is only EDO.<br>TBD: algo select for xen freq.<br>(option for fn = 2n/12*440 Hz, etc)
    </p>
    <div class="main">

        <div class="input-div">
            <label for="rootMIDI">Root MIDI #</label>
            <input id="rootMIDI" type="number"  min="0" max="126" value="60" onchange="refreshPage();"></input>
        </div>


        <div class="input-div">
            <label for="rootFreq">Root Freq.</label>
            <input id="rootFreq" type="number"  min="1" max="20000" step="0.00001" value="261.63000" onchange="refreshPage();"></input>
        </div>

        <div class="input-div">
            <label for="octDivs">8va Divs.</label>
            <input id="octDivs" type="number"  min="1" max="100" value="12" onchange="refreshPage();"></input>
        </div>

        <div class="input-div">
            <label for="octave">8va Mult.</label>
            <input id="octMult" type="number"  min="0.01" max="10" value="2.00" step="0.01" onchange="refreshPage();"></input>
        </div>

    </div>




    <div class="input-div grow" id="key-container">
        <div id="key-div">

        </div>
    </div>

    <p class="tbd">
        TBD: HTML -- keep keys &amp; MIDI note btns static, only redraw xen scale as needed
    </p>





    <h2>SYNTH</h2>
    <p>WEB MIDI support: Chrome, Edge, Opera, Android web viewer</p>
    <p class="tbd">TBD: lol like everything. I'll prolly end up implement a library like Tone.js or something</p>
    <div class="main">
        <div class="full-slider">
            <label for="volumeSlider">VOLUME</label>
            <input type="range" id="volumeSlider" min="0.000" max="0.500" step="0.001" value="0.150" oninput="chVolume(this.value);">
        </div>
        <div class="osc-divs">
            <div id="osc0"></div>
            <div id="osc1"></div>
            <div id="osc2"></div>
            <div id="osc3"></div>
        </div>
        <div class="osc-divs">
            <div id="osc4"></div>
            <div id="osc5"></div>
            <div id="osc6"></div>
            <div id="osc7"></div>
        </div>
    </div>
    <button id="kill" onclick="killAll();">KILL ALL OSC</button>







<h2>TABLES</h2>
    <div class="main tbd">
        TBD: Doublecheck Scala output on something.
    </div>
    <div class="main">
        <div class="input-div grow">
            <label for="scale-name">File Name</label>
            <input class="full-width"  type="text" id="scaleName" value="My-Scale">
        </div>

        <div class="input-div grow">
            <label for="scale-description">Scale Descrip.</label>
            <input class="full-width" type="text" id="scaleDescription" value="It's the best">
        </div>
    </div>

    <div class="output-div">

        <div class="output-cell grow">
            <h3>MIDI# Freq:</h3>
            <div id="MIDI-list"></div>
        </div>

        <div class="output-cell grow">
            <h3>Scala .scl:</h3>
            <div class="output-list" id="scala"></div>
        </div>

        <div class="output-cell grow">
            <h3>Scala .kbm:</h3>
            <div class="output-list" id="key-map"></div>
        </div>
    </div>

</body>
</html>